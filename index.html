<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Pharmacodynamic Parameter Database</title>

  <link rel="stylesheet"
        href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">

  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

  <style>
    tfoot input {
      width: 100%;
      box-sizing: border-box;
    }
  </style>
</head>

<body>
<h2>Pharmacodynamic Parameter Database</h2>

<table id="table" class="display" style="width:100%">
  <thead></thead>
  <tfoot></tfoot>
  <tbody></tbody>
</table>

<script>
Papa.parse("data.csv", {
  download: true,
  header: true,
  complete: function(results) {

    const columns = Object.keys(results.data[0]).map(col => ({
      title: col,
      data: col
    }));

    // Build header + footer
    const thead = $("<tr>");
    const tfoot = $("<tr>");

    columns.forEach(col => {
      thead.append(`<th>${col.title}</th>`);
      tfoot.append(`<th><input type="text" placeholder="Search ${col.title}" /></th>`);
    });

    $("#table thead").append(thead);
    $("#table tfoot").append(tfoot);

    const table = $('#table').DataTable({
      data: results.data,
      columns: columns,
      pageLength: 25
    });

    // Apply column search
    table.columns().every(function () {
      const that = this;
      $('input', this.footer()).on('keyup change clear', function () {
        if (that.search() !== this.value) {
          that.search(this.value).draw();
        }
      });
    });
  }
});
</script>

</body>
</html>
